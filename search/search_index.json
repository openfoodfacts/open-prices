{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Open Prices","text":"<p>Open Prices is a project to collect and share prices of food products around the world. To learn more about the project, please visit prices.openfoodfacts.org.</p> <p>It consists of:</p> <ul> <li>a REST API, built using Django (repo: <code>open-prices</code>)</li> <li>a web interface, built using Vue.js (repo: <code>open-prices-frontend</code>)</li> </ul> <p>If you're a contributor, have a look at our tutorials to add a single or multiple prices!</p>"},{"location":"add-a-price/","title":"Contribute by adding prices","text":""},{"location":"add-a-price/#single-price-mode","title":"Single price mode","text":"<p>This tutorial is a step-by-step guide to add a price using the web interface. If you have any questions, please ask us on Slack, on the #prices channel!</p> <p>To add a price, we need some information, such as the product price, the location (=store), a proof photo, etc.</p> <p>Only the prices of food products are currently accepted.</p>"},{"location":"add-a-price/#step-1-identify-the-product","title":"Step 1: Identify the product","text":"<p>Identifing the product helps users know if they have scanned the right product to start with. We'll display info from Open Food Facts database, as well as the number of prices already available in the Open Prices database.</p> <p>The steps to add a product differ depending on whether the product is: - with a barcode - or raw (fruits, vegetables)</p> <p>If it doesn't have a barcode (raw products), you should select the category among the dropdown list. Not all categories are available yet, so if you can't find the right one, please let us know. Support for other units (e.g. 1 apple) is not yet available, but will be added soon.</p>"},{"location":"add-a-price/#step-2-add-the-price-with-a-proof","title":"Step 2: Add the price (with a proof)","text":"<p>For raw products, the price for 1 kg is expected.</p> <p>If the price is discounted, we currently expect the full price to be provided (improvements coming soon).</p> <p>We need a picture of the price tag that acts as a proof so that the data can be verified independently. Ideally, the image should contain both the price tag and the product. The product should be clearly visible, and the price tag should be readable.</p>"},{"location":"add-a-price/#proof-examples","title":"Proof examples","text":"Good Bad Both the price tag and the product are visible Here it's difficult to recognize the product using the photo alone"},{"location":"add-a-price/#step-3-add-the-location-date","title":"Step 3: Add the location &amp; date","text":"<p>The location is the store where the product was found. This can be a supermarket, a local store, a farmer's market, etc. The only requirement is that it is a physical location where you can buy food. The location needs to be registered in OpenStreetMap, otherwise you won't be able to select it. If your store is not in OpenStreetMap, you can add it there first (ask for help if you're not familiar with OpenStreetMap!).</p> <p>The date is when you found the price. It can be different from the date you actually add the price. This is important because prices change over time, and we want to be able to track these changes.</p>"},{"location":"add-multiple-prices/","title":"Contribute by adding prices","text":""},{"location":"add-multiple-prices/#multiple-price-mode-shop-shelf","title":"Multiple price mode (shop shelf)","text":"<p>This tutorial is a step-by-step guide to add multiple prices using the web interface. If you have any questions, please ask us on Slack, on the #prices channel!</p> <p>To add the prices, we need some information, such as a proof photo of the shelf containing the products and their corresponding prices, as well as a location (=store), etc.</p> <p>Only the prices of food products are currently accepted.</p>"},{"location":"add-multiple-prices/#step-1-take-a-photo-proof","title":"Step 1: take a photo (proof)","text":"<p>We need a picture of the shelf, showing the products with their price tags. This picture will be used as a proof so that the data can be verified independently. The products should be clearly visible, and the price tags should be readable.</p>"},{"location":"add-multiple-prices/#proof-examples","title":"Proof examples","text":"Good Bad"},{"location":"add-multiple-prices/#step-2-add-the-location-date","title":"Step 2: Add the location &amp; date","text":"<p>The location is the store where the products are found. This can be a supermarket, a local store, a farmer's market, etc. The only requirement is that it is a physical location where you can buy food. The location needs to be registered in OpenStreetMap, otherwise you won't be able to select it. If your store is not in OpenStreetMap, you can add it there first (ask for help if you're not familiar with OpenStreetMap!).</p> <p>The date is when you found the prices. It can be different from the date you actually add the prices. This is important because prices change over time, and we want to be able to track these changes.</p>"},{"location":"add-multiple-prices/#step-3-add-the-product-prices-one-by-one","title":"Step 3: Add the product prices one by one","text":"<p>If the products contain barcodes, you can now click on \"Add a price\", and start adding the product prices one by one. It's fast, as we need only 2 information per product: it's barcode, and it's price.</p> <p>If it doesn't have a barcode (raw products), you should select the category among the dropdown list. Not all categories are available yet, so if you can't find the right one, please let us know. Support for other units (e.g. 1 apple) is not yet available, but will be added soon.</p>"},{"location":"local-development/","title":"Local development","text":""},{"location":"local-development/#work-with-ml-models","title":"Work with ML models","text":"<p>When uploading a proof, machine learning models are run asynchronously in the background, thanks to Django Q2.</p> <p>However, it still requires a Triton server to be running, as well as a Gemini API key to be set in the environment variables.</p> <p>Triton is used to:</p> <ul> <li>detect the proof type (<code>proof_classification</code>)</li> <li>detect price tags on the proof (<code>price_tag_detection</code>)</li> </ul> <p>Gemini is used to:</p> <ul> <li>extract information from receipts (<code>receipt_extraction</code>)</li> <li>extract information from price tags (<code>price_tag_extraction</code>)</li> </ul> <p>To run Triton, you should first clone the Robotoff repository.</p> <p>Then, download the object detection models: <pre><code>make dl-object-detection-models\n</code></pre></p> <p>Then, run the Triton server:</p> <pre><code>make up service=triton\n</code></pre> <p>You can check with <code>docker logs triton</code> that the server is running correctly.</p> <p>For Gemini, the easiest way to set it up is to use the Gemini API. You can set your API key by overriding the <code>GEMINI_API_KEY</code> environment variable in your <code>.envrc</code> file:</p> <pre><code>export GEMINI_API_KEY=your_api_key_here\n</code></pre>"},{"location":"maintenance/","title":"Maintenance","text":""},{"location":"maintenance/#how-to-launch-ocr-on-previously-uploaded-images","title":"How to launch OCR on previously uploaded images","text":"<p>OCR (through Google Cloud Vision) is launched on every new proof image. However, if you want to launch OCR on previously uploaded images, you can do so by running the following command:</p> <pre><code>make cli args='run_ocr'\n</code></pre> <p>To override existing OCR results, add the <code>--override</code> flag:</p> <pre><code>make cli args='run_ocr --override'\n</code></pre>"},{"location":"maintenance/#how-to-run-ml-models","title":"How to run ML models","text":"<p>Sometimes, due to Triton or Gemini API being unavailable (or any other issue), ML models may fail to run. If you want to retry running the ML models, you can do so by running the following command:</p> <pre><code>make cli args='run_ml_models'\n</code></pre> <p>This run the following models:</p> <ul> <li><code>proof_classification</code> (detect the proof type)</li> <li><code>price_tag_detection</code> (the object detection model that detects the spacial position of each price tag, only if the proof is a price tag)</li> <li><code>receipt_extraction</code> (Gemini extraction for receipt, if the proof is a receipt)</li> <li><code>price_tag_extraction</code> (Gemini extraction of price tags, if the proof is a price tag)</li> </ul> <p>If you want to run only a specific model, you can do so by passing the model name with <code>--types</code> flag. You can pass multiple model names separated by commas. For example, to run only the <code>proof_classification</code> and <code>price_tag_detection</code> models, you can run:</p> <pre><code>make cli args='run_ml_models --types proof_classification,price_tag_detection'\n</code></pre>"}]}